# Chaincode APIs

When the `Init`, `Invoke` or `Query` function of a chaincode is called, the fabric passes the `stub *shim.ChaincodeStub` parameter. This `stub` can be used to call APIs to access to the ledger services, transaction context, or to invoke other chaincodes.

The current APIs are defined in the [shim package](https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim), generated by `godoc`. However, it includes functions from [chaincode.pb.go](https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/chaincode.pb.go) such as `func (*Column) XXX_OneofFuncs` that are not intended as public API. The best is to look at the function definitions in [chaincode.go](https://github.com/hyperledger/fabric/blob/master/core/chaincode/shim/chaincode.go) and [chaincode samples](https://github.com/hyperledger/fabric/tree/master/examples/chaincode) for usage.



## Atributes
The following functions can be used to access the attributes stored in the transaction certificates from the application layer

`ReadCertAttribute` is used to read an specific attribute from the transaction certificate, *attributeName* is passed as input parameter to this function.

    attrValue,error:=stub.ReadCertAttribute("position")
    
    
`VerifyAttribute`is used to verify if the transaction certificate has an attribute with name *attributeName* and value *attributeValue* which are the input parameters received by this function

    containsAttr, error:=
    stub.VerifyAttribute("position", "Software Engineer")


`VerifyAttributes` does the same as `VerifyAttribute` but it checks for a list of attributes and their respective values instead of a single attribute/value pair

    containsAttrs, error:=
    stub.VerifyAttributes(&ac.Attribute{"position",  "Software Engineer"}, &ac.Attribute{"company", "ACompany"})
     

###Multiple accesses

If multiple calls to the functions above are required, a best practice is to create an ABACHandler instead of calling the functions multiple times, this practice will avoid creating a new abacHandler for each of these calls thus eliminating an unnecessary overhead.

    abacHandler, err := ac.NewABACHandlerImpl(stub)
    
	if err != nil {
		return false, err
	}
	
	abacHandler.VerifyAttribute(attributeName, attributeValue)
	//Make other verifications and/or read attribute values by 
	//using the abacHandler
 
    